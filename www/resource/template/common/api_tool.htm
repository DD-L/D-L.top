<meta charset="utf-8">
<style>
.api_tool {
	margin: 10px auto;
	min-width:750px;
}
.api_tool * {box-sizing: border-box;}
font{font-family: arial,'Microsoft Yahei','Hiragino Sans GB',sans-serif;}
a{text-decoration:none}fieldset{margin:3px auto}.cls_tools{background:#f5f5f5;font-family:"Helvetica Neue",Helvetica,"Liberation Sans",Arial,sans-serif;font-size:14px;line-height:1.4}.cls_header_fieldset{border:0}.cls_header_div .cls_title_div{height:40px}.cls_title_div{width:450px;position:relative}.cls_title_span{position:absolute;bottom:0;padding:0;font-family:arial,'Microsoft Yahei','Hiragino Sans GB',sans-serif;font-size:20px;line-height:1.5}.cls_url_div{height:55px}.cls_url_in{margin-left:25px;margin-right:50px}.cls_url_clear{width:45px}.cls_opt{width:100%;height:20px}.cls_opt_label{width:40px}.cls_b64{width:99px}.cls_token{width:172px}.cls_token input{width:109px}.cls_host{width:228px}.cls_host select{width:140px}.cls_opt_label,.cls_b64,.cls_sep_1,.cls_token,.cls_sep_2,.cls_host{margin:2px 2px;float:left}.cls_header_div,.cls_url_div,.cls_url_title,.cls_url_field,.fluid-input,.text{width:100%}.cls_title_div,.cls_url_label,.cls_opt_label{float:left}.cls_breathe-btn,.cls_url_clear{float:right}.cls_url_clear,.cls_title_span,.cls_url_title,.cls_url_field,.cls_opt{margin:6px}.cls_url_label,.cls_sep_1,.cls_sep_2{width:10px;text-align:center}.cls_url_clear{margin-top:-25px}.fluid-input{display:inline-block;_overflow:hidden}.fluid-input-inner{display:block;padding-right:10px;#zoom:1}.fluid-input .text{border:2px #ccc solid;padding:3px}.cls_res{height:auto!important;height:30px;min-height:30px;padding:3px;width:650px;word-wrap:break-word;word-break:normal}.cls_breathe-btn{position:relative;width:100px;height:40px;line-height:40px;border:1px solid #2b92d4;border-radius:5px;color:#fff;font-size:20px;text-align:center;cursor:pointer;box-shadow:0 1px 2px rgba(0,0,0,.3);overflow:hidden;background-image:-webkit-gradient(linear,left top,left bottom,from(#6cc3fe),to(#21a1d0));-webkit-animation-timing-function:ease-in-out;-webkit-animation-name:breathe;-webkit-animation-duration:2700ms;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:alternate}@-webkit-keyframes breathe{0%{opacity:.2;box-shadow:0 1px 2px rgba(255,255,255,0.1)}100%{opacity:1;border:1px solid rgba(59,235,235,1);box-shadow:0 1px 30px rgba(59,255,255,1)}}#ym-window{background:#fff;overflow:hidden;font-size:12px;font-family:'宋体'}.ym-tl{padding-left:4px;background:#aaa}.ym-tr{padding-right:4px}.ym-tc{border-top:4px solid #aaa;background:#ddd;overflow:hidden;height:25px;line-height:25px}.ym-ttc{height:0}.ym-header-text{color:#000;font-weight:bold;margin-left:5px;float:left}.ym-header-tools{float:right;margin-top:1px}.ym-ml{background:#aaa;padding-left:4px}.ym-mr{padding-right:4px}.ym-mc{background:#fff;padding:0}.ym-body{overflow:auto;padding:0;font-size:12px}.ym-btn{background:#fff;text-align:center}.ym-bl{background:#aaa;padding-left:4px}.ym-br{padding-right:4px}.ym-bc{height:4px;font-size:4px}.ymPrompt_alert .ym-content,.ymPrompt_succeed .ym-content,.ymPrompt_error .ym-content,.ymPrompt_confirm .ym-content{padding:50px 0 0}.ym-header-tools div{cursor:pointer;width:16px;height:16px;float:left;margin:0 1px;font-family:webdings}input.btnStyle{background:#ccc;width:80px;height:21px;line-height:21px;font-size:12px;color:#000;border:0;margin:10px 0}
</style>
<div class="api_tool">
<div class="cls_tools"><fieldset><legend>API tool</legend><fieldset class="cls_header_fieldset"><div class="cls_header_div"><div class="cls_title_div"><span class="cls_title_span">“视频播放页地址” 转 “API请求地址”:</span></div><div class="cls_breathe-btn"><a id='id_aboutapi' href='javascript:about_api();'>about API</a></div></div></fieldset><fieldset><div class="cls_url_div"><div class="cls_url_title"><font>带"protocol://"的视频播放页地址, 例如"http://v.youku.com/v_show/id_XMzgzNTUyNTI0.html"</font></div><div class="cls_url_field"><div class="cls_url_label"><font>url:</font></div><div class="cls_url_in"><b class="fluid-input" ><b class="fluid-input-inner">	<input id="id_url" type="text" class="text" oninput="set_url(this, 'oninput')" onpropertychange="set_url(this, 'onpropertychange')"/></b></b></div><div class="cls_url_clear"><input type="button" value="清空" onclick="text_clear()"/></div></div></div></fieldset><fieldset><div class="cls_opt"><div class="cls_opt_label"><font>定制:</font></div><div class="cls_b64"><input id="id_encrypt" type="checkbox" title="base64" onclick="transform()"/><span>base64加密</span></div><div class="cls_sep_1"><span> | </span></div><div class="cls_token"><span>token =</span><input id="id_token" type="text" value="PublicToken" onfocus="set_token(this, 'onfocus')" onblur="set_token(this, 'onblur')" oninput="set_token(this, 'oninput')" onpropertychange="set_token(this, 'onpropertychange')"/></div><div class="cls_sep_2"><span> | </span></div><div class="cls_host"><span>API server:</span><select id="id_api_domain" onchange="transform()"><option>api.D-L.top</option><option>simplevideo-deel.rhcloud.com</option></select></div></div></fieldset><fieldset><strong><div id="id_res" class="cls_res"></div></strong></fieldset></fieldset></div>
<script>
function match_url(c){if(c.length<75){var b="^(https|http|ftp|rtsp|mms)?://"+"(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?"+"(([0-9]{1,3}.){3}[0-9]{1,3}"+"|"+"([0-9a-z_!~*'()-]+.)*"+"([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]."+"[a-z]{2,6})"+"(:[0-9]{1,4})?"+"((/?)|"+"(/[0-9a-z_!~*(),.;?:@&=+%#-]+)+/?)$"}else{var b="^(https?|ftp|rtsp|mms)?://[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]"}var a=new RegExp(b,"i");return a.test(c)}function base64_encode(j){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var d,c,b,n,m,l,k,o,h=0,p=0,g="",f=[];if(!j){return j}do{d=j.charCodeAt(h++);c=j.charCodeAt(h++);b=j.charCodeAt(h++);o=d<<16|c<<8|b;n=o>>18&63;m=o>>12&63;l=o>>6&63;k=o&63;f[p++]=e.charAt(n)+e.charAt(m)+e.charAt(l)+e.charAt(k)}while(h<j.length);g=f.join("");var a=j.length%3;return(a?g.slice(0,a-3):g)+"===".slice(a||3)}function base64url(a){burl=a.replace("://",":##");burl=base64_encode(burl);burl=burl.replace("+","-").replace("/","_");return burl}function is_encrypt(){return document.getElementById("id_encrypt").checked}function set_url(b,a){switch(a){case"oninput":break;case"onpropertychange":if(window.event.propertyName.toLowerCase()!="value"){return}}transform()}function set_token(c,b){var a="PublicToken";switch(b){case"onfocus":if(c.value===a){c.value=""}break;case"onblur":if(c.value===""){c.value=a}break;case"oninput":break;case"onpropertychange":if(window.event.propertyName.toLowerCase()!="value"){return}}transform()}function get_api_domain(){var a=document.getElementById("id_api_domain");return a.options[a.selectedIndex].text}function get_token(){var a=document.getElementById("id_token");if(a==null){return""}else{return a.value}}function transform(){url=document.getElementById("id_url").value;if(url==""){res="Warning: URL is empty!"}else{if(match_url(url)){b64url=base64url(url);prefix="/svapi/";if(is_encrypt()){prefix="/svencryptapi/"}var a=get_token();var b=get_api_domain();if(a==""){res="Warning: Token is empty!"}else{trs_token=encodeURIComponent(a);if(trs_token===a){api_addr="http://"+b+prefix+"token/"+a+"/url/"+b64url;res='<a href="'+api_addr+'" target="_blank">'+api_addr+"</a>"}else{res="Warning: Bad token."}}}else{res="Warning: Bad url."}}document.getElementById("id_res").innerHTML=res}function text_clear(){document.getElementById("id_url").value="";transform()};
</script>
<!--<script type="text/javascript" src="/resource/js/common/ymPrompt.js"></script>-->
<script>
{{ ymPrompt_js }}
function about_api() {
	var msg_title = '关于API - SimpleVideo';
	var msg_content = function() {/*
		<fieldset><br><p>由于受<a href="http://news.pcgames.com.cn/492/4925963.html" target="_blank">"优酷状告AcFun侵权"事件</a>影响，本站(imzker.com)原有视频解析引擎飞驴api.flvxz.com的作者据说已经"跑路"了，导致服务被无限期中止。被逼无奈，只有自己亲自开发视频网站的视频解析接口(以下简称API)。同样受此A站事件影响，目前API服务器设在境外...</p>
		<p>有关API的一些非正式说明:</p>
		<ol>
			<li>API精仿api.flvxz.com的调用接口和返回的XML格式, 基本消除原先基于flvxz.com开发的应用的移植成本;</li>
			<li>API提供PublicToken. 考虑到服务器成本，使用PublicToken的两次数据请求之间的时间限制为25秒(峰值);</li>
			<li>未来不久，将面向开发者开放申请token;</li>
			<li>目前API还有几个未完善的地方，后续会陆续填补;</li>
			<li>当前API服务器位于海外，在网络高峰时段，可能会出现无法正常访问的情况;</li>
			<li>由于众所周知的原因，使用翻墙代理会加快访问API服务器的速度;</li>
			<li>为满足特殊用户需求，提供API加密通道;</li>
			<li>在境内, 使用域名 '<a href="http://api.d-l.top" target="_blank">api.D-L.top</a>' 可能比直接访问 '<a href="http://simplevideo-deel.rhcloud.com" target="_blank">simplevideo-deel.rhcloud.com</a>' 要快;</li>
			<li>在使用条款中，请留意"禁止商业用途"字眼;</li>
			<li>还没想好.</li>
		</ol></fieldset> */};
	var msg_height = 385;
	if (!+[1,]) msg_height = 368; // IE
	if (navigator.userAgent.indexOf("Firefox") > 0) msg_height = 355;
	ymPrompt.win({message:msg_content,width:655,height:msg_height,msgCls:'myContent',title:msg_title});
}
</script>			
</div>
